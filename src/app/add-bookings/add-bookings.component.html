<div class="container">
  <section class="listing-apply container mt-5">
    <div *ngIf="errorMessage" class="error-message alert alert-danger">
      {{ errorMessage }}
    </div>
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h3 class="card-title text-center mb-4">{{ isEditMode ? 'Edit Booking' : 'Apply now to add a booking' }}</h3>
            <form [formGroup]="applyForm" (submit)="isEditMode ? updateBooking() : submitApplication()">
              
              <!-- Name -->
              <div class="mb-3">
                <label for="name" class="form-label">Name:</label>
                <input id="name" type="text" formControlName="name" class="form-control" />
                <div *ngIf="applyForm.get('name')!.invalid && applyForm.get('name')!.touched" class="text-danger mt-1">
                  Name is required
                </div>
              </div>
              
              <!-- City -->
              <div class="mb-3">
                <label for="city" class="form-label">City:</label>
                <input id="city" type="text" formControlName="city" class="form-control" />
                <div *ngIf="applyForm.get('city')!.invalid && applyForm.get('city')!.touched" class="text-danger mt-1">
                  City is required
                </div>
              </div>
              
              <!-- State -->
              <div class="mb-3">
                <label for="state" class="form-label">State:</label>
                <input id="state" type="text" formControlName="state" class="form-control" />
                <div *ngIf="applyForm.get('state')!.invalid && applyForm.get('state')!.touched" class="text-danger mt-1">
                  State is required
                </div>
              </div>
              
              <!-- Photo1 URL -->
              <div class="mb-3">
                <label for="photo1" class="form-label">Photo1 URL:</label>
                <input id="photo1" type="text" formControlName="photo1" class="form-control" />
                <div *ngIf="applyForm.get('photo1')!.invalid && applyForm.get('photo1')!.touched" class="text-danger mt-1">
                  Photo1 URL is required
                </div>
              </div>
              
              <!-- Photo2 URL -->
              <div class="mb-3">
                <label for="photo2" class="form-label">Photo2 URL:</label>
                <input id="photo2" type="text" formControlName="photo2" class="form-control" />
                <div *ngIf="applyForm.get('photo2')!.invalid && applyForm.get('photo2')!.touched" class="text-danger mt-1">
                  Photo2 URL is required
                </div>
              </div>
              
              <!-- Photo3 URL -->
              <div class="mb-3">
                <label for="photo3" class="form-label">Photo3 URL:</label>
                <input id="photo3" type="text" formControlName="photo3" class="form-control" />
                <div *ngIf="applyForm.get('photo3')!.invalid && applyForm.get('photo3')!.touched" class="text-danger mt-1">
                  Photo3 URL is required
                </div>
              </div>
              
              <!-- Photo4 URL -->
              <div class="mb-3">
                <label for="photo4" class="form-label">Photo4 URL:</label>
                <input id="photo4" type="text" formControlName="photo4" class="form-control" />
                <div *ngIf="applyForm.get('photo4')!.invalid && applyForm.get('photo4')!.touched" class="text-danger mt-1">
                  Photo4 URL is required
                </div>
              </div>
              
              <!-- Photo5 URL -->
              <div class="mb-3">
                <label for="photo5" class="form-label">Photo5 URL:</label>
                <input id="photo5" type="text" formControlName="photo5" class="form-control" />
                <div *ngIf="applyForm.get('photo5')!.invalid && applyForm.get('photo5')!.touched" class="text-danger mt-1">
                  Photo5 URL is required
                </div>
              </div>
              
              <!-- Available Units -->
              <div class="mb-3">
                <label for="availableUnits" class="form-label">Available Units:</label>
                <input id="availableUnits" type="number" formControlName="availableUnits" class="form-control" />
                <div *ngIf="applyForm.get('availableUnits')!.invalid && applyForm.get('availableUnits')!.touched" class="text-danger mt-1">
                  Available Units is required
                </div>
              </div>
              
              <!-- WiFi -->
              <div class="mb-3">
                <label for="wifi" class="form-label">WiFi:</label>
                <input id="wifi" type="checkbox" formControlName="wifi" class="form-check-input" />
                <div *ngIf="applyForm.get('wifi')!.invalid && applyForm.get('wifi')!.touched" class="text-danger mt-1">
                  WiFi is required
                </div>
              </div>
              
              <!-- Laundry -->
              <div class="mb-3">
                <label for="laundry" class="form-label">Laundry:</label>
                <input id="laundry" type="checkbox" formControlName="laundry" class="form-check-input" />
                <div *ngIf="applyForm.get('laundry')!.invalid && applyForm.get('laundry')!.touched" class="text-danger mt-1">
                  Laundry is required
                </div>
              </div>
              
              <!-- Amount -->
              <div class="mb-3">
                <label for="amount" class="form-label">Amount:</label>
                <input id="amount" type="number" formControlName="amount" class="form-control" />
                <div *ngIf="applyForm.get('amount')!.invalid && applyForm.get('amount')!.touched" class="text-danger mt-1">
                  Amount is required
                </div>
              </div>
              
              <!-- Description -->
              <div class="mb-3">
                <label for="description" class="form-label">Description:</label>
                <textarea id="description" formControlName="description" class="form-control"></textarea>
                <div *ngIf="applyForm.get('description')!.invalid && applyForm.get('description')!.touched" class="text-danger mt-1">
                  Description is required
                </div>
              </div>
              
              <!-- Submit Button -->
              <button type="submit" class="btn w-100 bg" [disabled]="applyForm.invalid">
                {{ isEditMode ? 'Update Booking' : 'Add Booking' }}
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Display Current Bookings -->
  <!-- <h2 class="section-heading" style="text-align: center;">Current Bookings</h2>
  <section class="listing-display">
    <div *ngFor="let booking of bookings">
      <h3>{{ booking.name }}</h3>
      <p>{{ booking.city }}, {{ booking.state }}</p>
      <img [src]="booking.photo1" alt="{{ booking.name }}" />
      <p>Available Units: {{ booking.availableUnits }}</p>
      <p>WiFi: {{ booking.wifi ? 'Yes' : 'No' }}</p>
      <p>Laundry: {{ booking.laundry ? 'Yes' : 'No' }}</p>
      <p>Amount: ${{ booking.amount }}</p>
      <p>{{ booking.description }}</p>
      <button class="btn btn-warning" (click)="editBooking(booking)">Edit</button>
      <button class="btn btn-danger" (click)="deleteBooking(booking._id)">Delete</button>
    </div>
  </section> -->
</div>

<h2 class="section-heading" style="text-align: center;">Current Bookings</h2>
<div *ngIf="bookings.length > 0; else noBookings" class="container">
  <table class="table table-striped table-bordered">
    <thead class="thead-dark">
      <tr>
        <th>Name</th>
        <th>City</th>
        <th>State</th>
        <th>Photo</th>
        <th>Available Units</th>
        <th>WiFi</th>
        <th>Laundry</th>
        <th>Amount</th>
        <th>Description</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let booking of bookings">
        <td>{{ booking.name }}</td>
        <td>{{ booking.city }}</td>
        <td>{{ booking.state }}</td>
        <td><img [src]="booking.photo1" alt="{{ booking.name }}" style="width: 100px;" /></td>
        <td>{{ booking.availableUnits }}</td>
        <td>{{ booking.wifi ? 'Yes' : 'No' }}</td>
        <td>{{ booking.laundry ? 'Yes' : 'No' }}</td>
        <td>${{ booking.amount }}</td>
        <td>{{ booking.description }}</td>
        <td>
          <button class="btn btn-warning btn-sm" (click)="editBooking(booking)">Edit</button>
          <button class="btn btn-danger btn-sm" (click)="deleteBooking(booking._id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<ng-template #noBookings>
  <p>No bookings found for you.</p>
</ng-template>

